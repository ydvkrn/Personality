<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            margin: 0;
            overflow: hidden;
        }
        .shine-text {
            color: white;
            font-style: italic;
            font-family: 'Courier New', Courier, monospace;
            text-shadow: 0px 0px 10px rgba(0,0,0,0.7);
        }
        .content-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow-y: auto;
            padding-top: 50px;
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            width: 100%;
            max-width: 500px;
            margin-top: 20px;
        }
        .video-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="content-container">
        <div class='text-center'>
            <h1 class='text-4xl font-extrabold shine-text' id="welcome-text"></h1>
            <h2 class='text-5xl font-extrabold shine-text' id="main-title"></h2>
            <p class='text-lg italic shine-text' id="subtitle"></p>
        </div>
        <div class='video-grid' id='video-grid'></div>
    </div>

    <script>
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                // Set background
                document.body.style.backgroundImage = `url('${data.content.backgroundImage}')`;
                
                // Set text content
                document.getElementById("welcome-text").textContent = data.content.welcomeText;
                document.getElementById("main-title").textContent = data.content.mainTitle;
                document.getElementById("subtitle").textContent = data.content.subtitle;

                const videoGrid = document.getElementById('video-grid');

                data.content.mediaItems.forEach(item => {
                    let mediaElement;

                    // "Reel Of The Day" ke liye special handling
                    if (item.name === "Reel Of The Day" && item.reels && item.reels.length > 0) {
                        mediaElement = `
                            <video class='w-64 h-64 object-cover rounded-lg mb-2' muted loop>
                                <source src='${item.reels[0].media}' type='video/mp4'>
                                Your browser does not support the video tag.
                            </video>
                        `;
                    } else {
                        // Check if media is video
                        const isVideo = item.media.toLowerCase().endsWith(".mp4") || 
                                        item.media.toLowerCase().endsWith(".webm") || 
                                        item.media.toLowerCase().endsWith(".mov");

                        mediaElement = isVideo ?
                            `<video class='w-64 h-64 object-cover rounded-lg mb-2' autoplay muted loop>
                                <source src='${item.media}' type='video/mp4'>
                                Your browser does not support the video tag.
                            </video>` :
                            `<img src='${item.media}' alt='${item.name} preview' class='w-64 h-64 object-cover rounded-lg mb-2'>`;
                    }

                    videoGrid.innerHTML += `
                        <div class='video-item'>
                            <a href='${item.link}'>
                                ${mediaElement}
                            </a>
                            <p class='font-semibold text-2xl shine-text'>${item.name}</p>
                        </div>
                    `;
                });

                // Audio force play
                if (data.content.audio) {
                    const audio = new Audio(data.content.audio);
                    audio.loop = true;
                    
                    // Try to play immediately
                    audio.play().catch(() => {
                        // If autoplay fails, try on first user interaction
                        const playOnInteraction = () => {
                            audio.play().catch(console.log);
                            document.removeEventListener('click', playOnInteraction);
                            document.removeEventListener('touchstart', playOnInteraction);
                        };
                        document.addEventListener('click', playOnInteraction);
                        document.addEventListener('touchstart', playOnInteraction);
                    });
                }
            })
            .catch(err => {
                console.error("Failed to load JSON:", err);
                document.body.innerHTML = `<div class="content-container"><p class='shine-text'>Error loading content.</p></div>`;
            });
    </script>
</body>
</html>
